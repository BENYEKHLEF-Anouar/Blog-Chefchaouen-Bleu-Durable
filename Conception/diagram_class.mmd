classDiagram
    %% --- Enumerations ---
    class Role {
      <<enumeration>>
      Visitor
      Touriste
      Créateur
      Rédacteur
      Admin
    }

    class ArticleStatus {
      <<enumeration>>
      Draft
      Published
      Archived
    }

    %% --- Classes ---
    class User {
      +user_id : PK
      +username : String
      +name : String?
      +email : String
      +password_hash : String?
      +role : Role
      +email_verified_at : DateTime?
      +created_at : DateTime
      +updated_at : DateTime
    }

    class Article {
      +article_id : PK
      +title : String
      +slug : String (unique)
      +content : Text
      +image : String?
      +views : Integer = 0
      +shares : Integer = 0
      +status : ArticleStatus
      +author_id : FK → User
      +category_id : FK → Category
      +published_at : DateTime?
      +is_moderated : Boolean = false
      +created_at : DateTime
      +updated_at : DateTime
    }

    class Comment {
      +comment_id : PK
      +article_id : FK → Article
      +user_id : FK → User?
      +guest_name : String?
      +content : Text
      +is_approved : Boolean = false
      +created_at : DateTime
      +updated_at : DateTime
    }

    class Favorite {
      +user_id : FK → User
      +article_id : FK → Article
      +created_at : DateTime
      %% Composite PK
    }

    class Tag {
      +tag_id : PK
      +name : String (unique)
      +created_at : DateTime
      +updated_at : DateTime
    }

    class ArticleTag {
      +article_id : FK → Article
      +tag_id : FK → Tag
    }

    %% --- New Category table ---
    class Category {
      +category_id : PK
      +name : String (unique)
      +slug : String (unique)
      +description: Text
    }

    %% --- Relationships ---
    User "1" --> "0..*" Article : écrit >
    User "0..1" --> "0..*" Comment : écrit >
    User "1" --> "0..*" Favorite : aime >

    Article "1" --> "0..*" Comment : reçoit >
    Article "1" --> "0..*" Favorite : est aimé par >
    Article "1" --> "0..*" ArticleTag : possède >
    Article "*" --> "1" Category : appartient à >

    Tag "1" --> "0..*" ArticleTag : catégorise >

    %% --- Notes ---
    %% note for User "• Visitor / Touriste : Lecture uniquement\n• Créateur : Partager ses projets, commenter\n• Rédacteur : Publier des articles et médias\n• Admin : Modérer, tout gérer"
